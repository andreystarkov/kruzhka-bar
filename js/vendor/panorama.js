!function(a){a.fn.panorama=function(b){function c(b,d,e){if(currentPosition=0-parseInt(a(b).css("margin-left")),"right"==e.direction)a(b).animate({marginLeft:0},e.speed/d*currentPosition,"linear",function(){e.mode_360&&(a(b).css("marginLeft","-"+(parseInt(parseInt(d))+"px")),c(b,d,e))});else{var f;f=e.mode_360?d:d-e.viewport_width,a(b).animate({marginLeft:-f},e.speed/f*(f-currentPosition),"linear",function(){e.mode_360&&(a(b).css("margin-left",0),c(b,d,e))})}}this.each(function(){var d={viewport_width:1140,speed:25e3,direction:"left",control_display:"auto",start_position:1800,auto_start:!1,mode_360:!0};b&&a.extend(d,b);var h,i,e=parseInt(a(this).attr("width")),f=parseInt(a(this).attr("height")),j=!1,k=0;a(this).attr("unselectable","on").css("position","relative").css("-moz-user-select","none").css("-webkit-user-select","none").css("margin","0").css("padding","0").css("border","none").wrap("<div class='panorama-container'></div>"),d.mode_360&&a(this).clone().insertAfter(this),i=a(this).parent(),i.css("height",f+"px").css("overflow","hidden").wrap("<div class='panorama-viewport'></div>").parent().css("width",d.viewport_width+"px").append("<div class='panorama-control'><a href='#' class='panorama-control-left'><i class='icon-double-angle-left'></i></a> <a href='#' class='panorama-control-pause'><i class='icon-pause'></i></a> <a href='#' class='panorama-control-right'><i class='icon-double-angle-right'></i></a> </div>"),h=i.parent(),h.mousedown(function(a){return j||(j=!0,k=a.clientX),!1}).mouseup(function(){return j=!1,k=0,!1}).mousemove(function(a){if(j){var b=parseInt((k-a.clientX)/30);if(b>10||10>b){var c=parseInt(i.css("marginLeft"))+b;d.mode_360?(c>0&&(c=-e),-e>c&&(c=0)):(c>0&&(c=0),-e>c&&(c=-e)),i.css("marginLeft",c+"px")}}}).bind("contextmenu",function(){return!1}),h.css("height",f+"px").css("overflow","hidden").find("a.panorama-control-left").bind("click",function(){return a(i).stop(),d.direction="right",c(i,e,d),!1}),h.bind("click",function(){a(i).stop()}),h.find("a.panorama-control-right").bind("click",function(){return a(i).stop(),d.direction="left",c(i,e,d),!1}),h.find("a.panorama-control-pause").bind("click",function(){return a(i).stop(),!1}),"yes"==d.control_display?h.find(".panorama-control").show():"auto"==d.control_display&&h.bind("mouseover",function(){return a(this).find(".panorama-control").stop().fadeToggle(300),!1}).bind("mouseout",function(){return a(this).find(".panorama-control").fadeToggle({duration:200,queue:!1}),!1}),a(this).parent().css("margin-left","-"+d.start_position+"px"),d.auto_start&&c(i,e,d)})}}(jQuery);